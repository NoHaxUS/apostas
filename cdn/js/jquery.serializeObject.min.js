
(function(a,b){if(typeof define==="function"&&define.amd){define(["exports","jquery"],function(d,e){return b(d,e)})}else{if(typeof exports!=="undefined"){var c=require("jquery");b(exports,c)}else{b(a,(a.jQuery||a.Zepto||a.ender||a.$))}}}(this,function(a,d){var b={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};function c(g,r){var k={},m={};function o(u,s,t){u[s]=t;return u}function p(t,w){var v=t.match(b.key),u;while((u=v.pop())!==undefined){if(b.push.test(u)){var s=i(t.replace(/\[\]$/,""));w=o([],s,w)}else{if(b.fixed.test(u)){w=o([],u,w)}else{if(b.named.test(u)){w=o({},u,w)}}}}return w}function i(s){if(m[s]===undefined){m[s]=0}return m[s]++}function l(s){switch(d('[name="'+s.name+'"]',r).attr("type")){case"checkbox":return s.value==="on"?true:s.value;default:return s.value}}function h(t){if(!b.validate.test(t.name)){return this}var s=p(t.name,l(t));k=g.extend(true,k,s);return this}function j(u){if(!g.isArray(u)){throw new Error("formSerializer.addPairs expects an Array")}for(var t=0,s=u.length;t<s;t++){this.addPair(u[t])}return this}function q(){return k}function n(){return JSON.stringify(q())}this.addPair=h;this.addPairs=j;this.serialize=q;this.serializeJSON=n}c.patterns=b;c.serializeObject=function f(){if(this.length>1){return new Error("jquery-serialize-object can only serialize one form at a time")}return new c(d,this).addPairs(this.serializeArray()).serialize()};c.serializeJSON=function e(){if(this.length>1){return new Error("jquery-serialize-object can only serialize one form at a time")}return new c(d,this).addPairs(this.serializeArray()).serializeJSON()};if(typeof d.fn!=="undefined"){d.fn.serializeObject=c.serializeObject;d.fn.serializeJSON=c.serializeJSON}a.FormSerializer=c;return c}));