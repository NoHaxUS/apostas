{% extends 'admin/layout.twig' %}

{% block main %}

    <form class="admpage-form">

        <div class="text-center">
            <img src="{{ user.imgCapa().redimensiona(160,160) }}"
                 class="img-foto img-responsive img-circle center-block"/>
            <div class="divider-10">
                {{ inputFile('<i class="fa fa-image"></i> Foto', 'upfoto', 'image/*', 'btn-success', {'data-target': '.img-foto'}) }}
            </div>
            <div class="divider-20"></div>
        </div>

        <div class="panel">
            <div class="panel-body">
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label>Nome</label>
                        <input type="text" name="nome" class="form-control" required/>
                    </div>
                    <div class="form-group col-xs-3">
                        <label>Usuário</label>
                        <input type="text" name="login" class="form-control" required disabled maxlength="20" pattern="[a-z0-9A-Z_]{5,20}"/>
                        <span class="help-inline">5 a 20 caracteres entre letras, números e _(underline).</span>
                    </div>
                    <div class="form-group col-xs-3">
                        <label>Telefone</label>
                        <input type="text" name="telefone" class="form-control mask-telefone"/>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-3">
                        <label>Celular</label>
                        <input type="text" name="celular" class="form-control mask-telefone"/>
                    </div>
                    <div class="form-group col-xs-3">
                        <label>Whastapp</label>
                        <input type="text" name="whatsapp" class="form-control mask-telefone"/>
                    </div>
                    <div class="form-group col-xs-6">
                        <label>E-mail</label>
                        <input type="email" name="email" class="form-control" required/>
                    </div>
                </div>
                <h3>Localização</h3>
                {% include 'tpl/form-endereco.twig' %}
                <h3>Definir nova senha</h3>
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label>Nova Senha</label>
                        <input type="password" name="nsenha" class="form-control"/>
                        <span class="help-inline">Preencher somente se for atualizar a senha</span>
                    </div>
                    <div class="form-group col-xs-6">
                        <label>Repita a nova Senha</label>
                        <input type="password" name="nsenhar" class="form-control"/>
                    </div>
                </div>
                <h3>Confirmar Senha</h3>
                <div class="form-group">
                    <label>Senha atual</label>
                    <input type="password" name="senha" class="form-control" required/>
                </div>
            </div>
            <div class="panel-footer text-right">
                <button class="btn btn-primary">
                    <i class="fa fa-save"></i> Salvar
                </button>
            </div>
        </div>
    </form>

{% endblock %}

{% block script %}

    <script>

        $('.admpage-form')
            .setValues({{ json(user) }})
            .adminPage({
                alertSuccess: true,
                insertAction: 'atualizar',
                autoSearch: false,
                autoReset: false,
                reloadSuccess: url(),
            });


    </script>

{% endblock %}